## 第一章 向量的基本概念

向量是有大小和方向的量。

向量就像一种阵法，古有九宫八卦，而此有矩阵，领悟其中的法则，便可以主宰八荒六合 。

在图形的世界中，无论物体如何变换，都是对顶点的一种位移。其位移有量有方向，此量此向即为向量。

接下来，咱们就先从基础说起，  说一下向量的直观形象。



![image-20200827093110036](https://blog-st.oss-cn-beijing.aliyuncs.com/160104181928877507198509427.png)

已知点A，点A 要位移到点B，那么这种行为就产生了两种点位：

- 始点：位移起始的位置，即点A。

- 终点：位移结束的位置，即点B。


点A和点B可以构成一条线段，这条线段还是有方向的，那么这样的线段就叫有向线段。

有向线段就是向量的直观形象。

- 有向线段的方向就是向量的方向。

- 有向线段的长度就是向量的长度。


向量和向量之间存在一种向量相等的关系。

向量相等的条件：两个向量同向、等长。

向量中还存在两个特殊的向量：

- 零向量：长度为零的向量  。

- 位置向量：向量终点相对于始点的位置，其直观表现就是向量的长度和方向不变，始点归零。

这里我们要简单强调一下位置向量。

因为位置向量的始点为零，所以这样的向量也可以表示一个坐标点位，这便是位置向量名字的由来。

在做多向量运算的时候，为了方便运算，常常会把所有向量统一为位置向量。如下图：

![image-20200918090415995](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192885976134694035902.png)



关于向量的基本概念，我们就说到这。

接下来，咱们说一下向量的运算。



## 第二章 向量的运算

在实际的项目开发中，我们还会遇到这样的问题：

- 点A向着点B的方向移动100 后的位置是什么？
- 点A向着点B的方向移动一半的距离后的位置是什么？
- 点A绕着点B旋转30°后的位置在哪里？

要解决上面的问题，就需要用到向量的运算了，向量也是可以加、减、乘、除的，只有对这些运算有了透彻的领悟，你才能更好的操控图形。



### 1-向量求和

接下来咱们直接拿例子说事。

#### 1-1-三角形解法

已知：向量a、b

![image-20200828090114024](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192883229539103335324.png)

求：向量a、b的和

解：在平面上任取一点A，做向量AB=a，向量BC=b

![image-20200918093228264](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192888531140720143873.png)



则向量a、b的和，就等于点A移动到点B，再移动到点C 后的向量AC。

我们除了可以用三角形求向量之和，也可以用平行四边形来求解。



#### 1-2-平行四边形解法

我们可以在平面上任取一点A，做向量AB=a，向量AD=b。

![image-20200918100427436](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192886002684660262325.png)

则向量a、b之和将等于以AB、AC 为临边的平行四边形的对角线AD。 

上面的两种解法是数学中的解法，接下来咱们说一下向量求和在实际坐标点位中的解法。



#### 1-3-坐标点位解法

已知：向量a、b

a 的始点是aS(100,200)

a 的终点是aE(200,300)

b 的始点是aS(100,300)

b 的终点是aE(400,300)

求：向量a、b的和

解：先将向量a、b 简化为位置向量

位置向量a=aE-aS=(200-100,300-200)=(100,100)

位置向量b=bE-bS=(400-100,300-300)=(300,0)

a+b=(100+300,100+0)=(400,300)

我们之前运算都是对两个向量做求和运算，那么如果是多个向量求和呢？这里就需要探索向量求和中的结合律了。



#### 1-4-结合律   

咱们先举个加法的例子。

已知：a=1，b=2，c=3

则：

a+b+c=1+2+3=6

b+a+c=2+1+3=0

a+b=b+a

上面的算法就是加法的结合律。

那么，如果我们把a、b、c 看成向量，那么是不是也可以这么算呢？其返回结果又是什么？

首先，咱们先给出答案，后面再去论证。

向量的加法也遵循加法的结合律，其返回结果是向量。

举个例子：

已知：向量a、b、c

求：a+b+c

解：

将向量a、b、c 首尾相连。

则：a+b+c 的结果就是以a 的起点为起点，以c的终点为终点的向量。

向量加法的结合律可以通过向量求和的三角解法来论证。

如下图：

![image-20200920101630617](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192885383010851231156.png)

由图可知：

a+b=OB

OB+c=OC

所以：

a+b+c=OC

关于向量求和，我们就说到这，接下来咱们说一下向量减法。



### 2-向量减法

在数字的运算中减法是加法的逆运算，向量也是同样原理。

#### 2-1-向量减法求解

用栗子说事。

![image-20200920102049624](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192884627840994437873.png)

已知：向量a，b

求：a-b

解：先将这两个向量的起点拼在一起

a-b 等于以减向量b 的终点为起点，以被减向量a 的终点为终点的向量BA。

b-a 等于以减向量a 的终点为起点，以被减向量b 的终点为终点的向量AB。

向量的减法就是这么简单，接下来咱们说几个特殊的向量减法。

#### 2-2-特殊的向量减法

- 位置向量：向量终点减向量起点。比如，一个向量BA 等于它的终点相对于原点O 的位置向量OA，减去它的起点相对应原点O 的向量OB
- 反向量：向量方向相反的向量，其直观表现就是坐标分量互为相反数。如向量(x,y)的反向量就是(-x,-y)。
- 垂直向量：向量方向垂直的向量，与某一向量垂直的向量有两个，这两个向量在一条基线上，它们互为相反数。如向量(x,y) 的垂直向量有(y,x)和(-y,-x)。

对于向量的减法，咱们就说到这。

我们先对向量的加减简单总结一下。

向量的加减和图形全等、平行有有着密切联系。

比如：方向相同或相反的两条向量的基线平行；方向相同或相反，且长度一样的两条线段相等。

接下来咱们说一下，向量的乘法。

向量的乘法有两玩法，一种是让向量乘以一个数字，名曰数乘；还有一种是两个向量相乘，名曰点积、内积或向量乘积。

咱们先说数乘。



### 3-数乘

数乘和图形的相似性、缩放有着密切关联。

还是先拿栗子说事。

#### 3-1-数乘的概念

![image-20200920102431461](https://blog-st.oss-cn-beijing.aliyuncs.com/160104181928821799323357303302.png)

已知：向量AB，AB被3等分，分割点位P、Q

则：

AP=1/3*AB 

AQ=2/3*AB  

由此可以引出数乘的定义：

实数λ和向量a 的乘积是一个向量，记做λa



#### 3-2-数乘的特性

向量λa 的长度：|λa|=|λ|*|a|

如果|λa|=1，则λa 叫做单位向量。

a≠0 时，λa 会出现的几种情况：

- λ>0 时，λa 与a 同方向

- λ<0 时，λa 与a 反方向

- λ=0 时，λa 为零向量


向量数乘的常见规律：

- (λ+μ)a=λa+μa
- λ(μa)=(λμ)a
- λ(a+b)=λa+λb

向量的基线：向量所在的直线。

平行向量基本定理：如果a=λb，则a、b平行；反之，若a、b平行(b≠0)，则必然存在一个实数λ，使a=λb

设向量a 的单位向量为a0，由向量的数乘可知：

a=|a|*a0

a0=a/|a|

其实直角坐标系里的坐标轴也是向量，接下来咱们就用向量解释一下直角坐标系，这有助于我们将向量运算分解为坐标运算。



### 4-坐标轴上向量坐标运算

轴：规定了方向和向量长度单位的直线。

在轴l 上，给定一个向量e，在轴上取任意向量a，那必然纯在唯一实数x，使a=xe，用e 可以生成与其平行的所有向量的集合{xe|e∈R }

e：轴l 的基向量

x：a在l 上的坐标，或数量

x 的绝对值等于|a|

a与e 同向时，x 为正；反之，x 为负。

轴上两个向量相等的条件是它们的坐标相等。

两个向量和的坐标等于两个向量坐标的和。

轴上向量的坐标等于向量终点的坐标减去向量起点的坐标。



我们之前说了那么多，都是基础，挺枯燥的，接下咱们说个好玩的栗子。





## 第三章 视图变换

百度地图，大家应该都不陌生吧。我们可以对地图进行缩放、平移，并对不同区域进行选择。接下来，咱们用向量说一下这个的实现原理。

### 1-缩放

![image-20200923111813158](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192888552735675827279.png)

已知：

视图中一点 A(ax,ay)

鼠标在视图中的位置 M(mx,my)

项目需求：当鼠标滑动滑动滚轮时，对视图进行缩放

解：

将向量均分成3段

![image-20200923111732125](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192887135416219152055.png)



当缩小视图时，就让向量a 的长度缩小1/3，这样点P1 就会移动到点Q 的位置。

因此，我们求出点Q 的位置，然后将点P1 放到这里，就可以实现视图的缩放了。

由向量数乘公式得：

MQ=2/3*MA

将向量分解为坐标点：

MQ=(2/3\*(mx-ax),2/3\*(my-ay))

当视图放大时也是同理，我们将乘数变成4/3 即可。



![4](https://blog-st.oss-cn-beijing.aliyuncs.com/16010418192884007605364342097.gif)



关于只有一个点的视图缩放我们就说到这，如果是多点的缩放，也是同样的道理，我就不再多说了。

我们说完缩放，大家应该还会想到平移，平移的实现，那就是向量加减了，这要比向量的缩放容易，咱们在这里还是说一下。



### 2-平移

已知：同上

项目需求：当鼠标移动时，对视图进行平移

设：

鼠标移动之前的点位为M1

鼠标移动之后的点位为M2

解：

鼠标每次移动时：

记录鼠标的位移向量：M1M2=M2-M1

让点A 加上鼠标的位移向量：A=A+M1M2

这时的点A 就是视图平移后的结果。



![4](https://blog-st.oss-cn-beijing.aliyuncs.com/1601041819288907877352249397.gif)



实际上，在对点位进行变换操作的时候，并没有这么简单，因为项目中往往，还会存在一个图形树的概念。

图形树就像我们的DOM 树一样，会存在具备父子关系的树状结构。

接下来咱们就详细剖析一下这个概念。



### 3-图形树的变换

举个例子：我把点A 装进了一个盒子里，我只知道点A在这个盒子里的位置，那么我在盒子外面用鼠标变换视图时，点A 相对于鼠标的位置是什么。

对于类似问题的解法，我将其称之为物质不易。

整理一下上面的例子。

已知：

视图scene 为最外层坐标系

鼠标点M 在视图scene 中

盒子box 在视图scene 中，其内自成空间，其矩形中心默认为其内部坐标系的原点，其内部坐标系可变换

点A(ax,ay) 在box 中

































未完待续，备课中……

















